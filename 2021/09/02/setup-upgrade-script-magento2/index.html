<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Tạo Và Chỉnh Sửa Bảng với Setup/Upgrade Script Trong Magento2 | Meditation Coding</title>
  <meta name="description" content="Table of Contents Lời mở đầu InstallSchema Script InstallData Script UpgradeSchema Script UpgradeData Script Tổng Kết  1.Lời mở đầu  Khi bạn đã Install hay Upgrade một module, làm thế nào để bạn có th">
<meta property="og:type" content="article">
<meta property="og:title" content="Tạo Và Chỉnh Sửa Bảng với Setup&#x2F;Upgrade Script Trong Magento2">
<meta property="og:url" content="https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/index.html">
<meta property="og:site_name" content="Meditation Coding">
<meta property="og:description" content="Table of Contents Lời mở đầu InstallSchema Script InstallData Script UpgradeSchema Script UpgradeData Script Tổng Kết  1.Lời mở đầu  Khi bạn đã Install hay Upgrade một module, làm thế nào để bạn có th">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/start.gif">
<meta property="og:image" content="https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/vietnam.gif">
<meta property="article:published_time" content="2021-09-02T03:35:20.000Z">
<meta property="article:modified_time" content="2021-09-02T12:16:29.204Z">
<meta property="article:author" content="HuongVNQ">
<meta property="article:tag" content="magento basic">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/start.gif">
  <!-- Canonical links -->
  <link rel="canonical" href="https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Meditation Coding" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/coco.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/huongvnq" target="_blank">
          <img class="img-circle img-rotate" src="/images/coco.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Meditation Coding</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Web Developer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Hanoi, Vietnam</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">Tags</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/huongvnq" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.facebook.com/profile.php?id=100010291426950" target="_blank" title="Facebook" data-toggle=tooltip data-placement=top><i class="icon icon-facebook"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Quote</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>Let us be loving, be kind, be simple, be silly, be happy.</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/GraphQL/">GraphQL</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Magento/">Magento</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NodeJS/">NodeJS</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Facebook-Graph-API/" rel="tag">Facebook Graph API</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REST-API/" rel="tag">REST API</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDL/" rel="tag">SDL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/" rel="tag">express</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fragment/" rel="tag">fragment</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphql/" rel="tag">graphql</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jwt/" rel="tag">jwt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/magento-basic/" rel="tag">magento basic</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/" rel="tag">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/resolve/" rel="tag">resolve</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/schema/" rel="tag">schema</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/API/" style="font-size: 13.67px;">API</a> <a href="/tags/Facebook-Graph-API/" style="font-size: 13px;">Facebook Graph API</a> <a href="/tags/REST-API/" style="font-size: 13px;">REST API</a> <a href="/tags/SDL/" style="font-size: 13.33px;">SDL</a> <a href="/tags/es6/" style="font-size: 13px;">es6</a> <a href="/tags/express/" style="font-size: 13px;">express</a> <a href="/tags/fragment/" style="font-size: 13px;">fragment</a> <a href="/tags/graphql/" style="font-size: 14px;">graphql</a> <a href="/tags/jwt/" style="font-size: 13px;">jwt</a> <a href="/tags/magento-basic/" style="font-size: 14px;">magento basic</a> <a href="/tags/mongodb/" style="font-size: 13px;">mongodb</a> <a href="/tags/resolve/" style="font-size: 13px;">resolve</a> <a href="/tags/schema/" style="font-size: 13.33px;">schema</a>
    </div>
  </div>

    
      
<div class="widget">
  <h3 class="widget-title">Archives</h3>
  <div class="widget-body">
    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">1</span></li></ul>
  </div>
</div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Magento/">Magento</a>
              </p>
              <p class="item-title">
                <a href="/2021/09/28/declarative-schema-magento2-chap2/" class="title">Declarative Schema Trong Magento2 (Phần 2)</a>
              </p>
              <p class="item-date">
                <time datetime="2021-09-28T12:44:47.000Z" itemprop="datePublished">2021-09-28</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Magento/">Magento</a>
              </p>
              <p class="item-title">
                <a href="/2021/09/25/declarative-schema-magento2/" class="title">Declarative Schema Trong Magento2 (Phần 1)</a>
              </p>
              <p class="item-date">
                <time datetime="2021-09-25T09:21:10.000Z" itemprop="datePublished">2021-09-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Magento/">Magento</a>
              </p>
              <p class="item-title">
                <a href="/2021/09/02/setup-upgrade-script-magento2/" class="title">Tạo Và Chỉnh Sửa Bảng với Setup/Upgrade Script Trong Magento2</a>
              </p>
              <p class="item-date">
                <time datetime="2021-09-02T03:35:20.000Z" itemprop="datePublished">2021-09-02</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/NodeJS/">NodeJS</a>
              </p>
              <p class="item-title">
                <a href="/2021/08/25/jwt-nodejs/" class="title">JWT Authentication &amp; Authorization in NodeJs REST API</a>
              </p>
              <p class="item-date">
                <time datetime="2021-08-25T09:44:45.000Z" itemprop="datePublished">2021-08-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/NodeJS/">NodeJS</a>
              </p>
              <p class="item-title">
                <a href="/2021/08/22/crud-nodejs/" class="title">CRUD với NodeJs, Express và MongoDB</a>
              </p>
              <p class="item-date">
                <time datetime="2021-08-22T09:13:32.000Z" itemprop="datePublished">2021-08-22</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article
    id="post-setup-upgrade-script-magento2"
    class="article article-type-post"
    itemscope
    itemtype="http://schema.org/BlogPosting"
  >
    
    <div class="article-header">
       
  
    <h1 class="article-title" itemprop="name">
      Tạo Và Chỉnh Sửa Bảng với Setup/Upgrade Script Trong Magento2
    </h1>
  
 
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/09/02/setup-upgrade-script-magento2/" class="article-date">
	  <time datetime="2021-09-02T03:35:20.000Z" itemprop="datePublished">2021-09-02</time>
	</a>
</span> 
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Magento/">Magento</a>
  </span>
 
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/magento-basic/" rel="tag">magento basic</a>
  </span>

 

        <span class="post-comment"
          ><i class="icon icon-comment"></i>
          <a
            href="/2021/09/02/setup-upgrade-script-magento2/#comments"
            class="article-comment-link"
            >Comments</a
          ></span
        >
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
       <h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><ol>
<li><a href="#introduction">Lời mở đầu</a></li>
<li><a href="#install-schema">InstallSchema Script</a></li>
<li><a href="#install-data">InstallData Script</a></li>
<li><a href="#upgrade-schema">UpgradeSchema Script</a></li>
<li><a href="#upgrade-data">UpgradeData Script</a></li>
<li><a href="#summary">Tổng Kết</a></li>
</ol>
<h2 id="1-Loi-mo-dau"><a href="#1-Loi-mo-dau" class="headerlink" title="1.Lời mở đầu "></a>1.Lời mở đầu <a name="introduction"></a></h2><ul>
<li><p>Khi bạn đã Install hay Upgrade một module, làm thế nào để bạn có thể chỉnh sửa cấu trúc của bảng, hay thêm dữ liệu cho bảng?</p>
</li>
<li><p>Để làm được điều đó, hôm nay chúng ta hãy cùng tìm hiểu cách để chạy các <strong>sql script Install</strong> và <strong>Upgrade</strong> cho một module và ý nghĩa của các script này nhé.</p>
</li>
<li><p>Mô tả chung chung về các script này thì:</p>
<ul>
<li><strong>InstallSchema</strong> - Class này sẽ được chạy khi module được install để tạo cấu trúc của bảng.</li>
<li><strong>InstallData</strong> - Class này được chạy khi module được install để init data cho bảng.</li>
<li><strong>UpgradeSchema</strong> - Class này được chạy khi module được upgrade và dùng để chỉnh sửa cấu trúc của bảng.</li>
<li><strong>UpgradeData</strong> - Class này được chạy khi module được upgrade và dùng để thêm hay xóa data của bảng.</li>
<li><strong>Recurring</strong></li>
<li><strong>Uninstall</strong></li>
</ul>
</li>
<li><p>Tất cả các class sẽ được đặt ở thư mục <span style="color:green"><strong>app/code/Vendor/Module/Setup</strong></span></p>
</li>
<li><p>script Install/Upgrade của module sẽ được chạy khi bạn chạy command line sau:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php bin/magento setup:upgrade</span><br></pre></td></tr></table></figure></li>
<li><p>Ở bài viết này chúng ta sẽ sử dụng module <code>Learning_HelloWorld</code> để tạo bảng, sửa bảng, tạo và cập nhật dữ liệu cho module nhé (Xem thêm <a href="/2021/07/18/create-a-new-module-in-magento2/" title="Create A New Module In Magento2">Create A New Module In Magento2</a>)</p>
<p>Let’s get started!</p>
<p><img src="/2021/09/02/setup-upgrade-script-magento2/start.gif" alt="start"></p>
</li>
</ul>
<h2 id="2-InstallSchema-Script"><a href="#2-InstallSchema-Script" class="headerlink" title="2.InstallSchema Script "></a>2.InstallSchema Script <a name="install-schema"></a></h2><ul>
<li>Class <strong>InstallSchema</strong> sẽ được chạy khi install module</li>
<li><strong>InstallSchema</strong> thường được dùng để tạo một bảng mới. Ví dụ dưới đây chúng ta sẽ tạo một bảng <code>learning_helloworld_post</code></li>
</ul>
<p>File <span style="color:green"><strong>app/code/Learning/HelloWorld/Setup/InstallSchema.php</strong></span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Learning</span>\<span class="title">HelloWorld</span>\<span class="title">Setup</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InstallSchema</span> <span class="keyword">implements</span> \<span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">InstallSchemaInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">install</span>(<span class="params">\Magento\Framework\Setup\SchemaSetupInterface <span class="variable">$setup</span>, \Magento\Framework\Setup\ModuleContextInterface <span class="variable">$context</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="variable">$installer</span> = <span class="variable">$setup</span>;</span><br><span class="line">		<span class="variable">$installer</span>-&gt;startSetup();</span><br><span class="line">		<span class="keyword">if</span> (!<span class="variable">$installer</span>-&gt;tableExists(<span class="string">&#x27;learning_helloworld_post&#x27;</span>)) &#123;</span><br><span class="line">			<span class="variable">$table</span> = <span class="variable">$installer</span>-&gt;getConnection()-&gt;newTable(</span><br><span class="line">				<span class="variable">$installer</span>-&gt;getTable(<span class="string">&#x27;learning_helloworld_post&#x27;</span>)</span><br><span class="line">			)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;post_id&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_INTEGER,</span><br><span class="line">					<span class="literal">null</span>,</span><br><span class="line">					[</span><br><span class="line">						<span class="string">&#x27;identity&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">						<span class="string">&#x27;nullable&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">						<span class="string">&#x27;primary&#x27;</span>  =&gt; <span class="literal">true</span>,</span><br><span class="line">						<span class="string">&#x27;unsigned&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">					],</span><br><span class="line">					<span class="string">&#x27;Post ID&#x27;</span></span><br><span class="line">				)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_TEXT,</span><br><span class="line">					<span class="number">255</span>,</span><br><span class="line">					[<span class="string">&#x27;nullable =&gt; false&#x27;</span>],</span><br><span class="line">					<span class="string">&#x27;Post Name&#x27;</span></span><br><span class="line">				)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;url_key&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_TEXT,</span><br><span class="line">					<span class="number">255</span>,</span><br><span class="line">					[],</span><br><span class="line">					<span class="string">&#x27;Post URL Key&#x27;</span></span><br><span class="line">				)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;post_content&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_TEXT,</span><br><span class="line">					<span class="string">&#x27;64k&#x27;</span>,</span><br><span class="line">					[],</span><br><span class="line">					<span class="string">&#x27;Post Post Content&#x27;</span></span><br><span class="line">				)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;tags&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_TEXT,</span><br><span class="line">					<span class="number">255</span>,</span><br><span class="line">					[],</span><br><span class="line">					<span class="string">&#x27;Post Tags&#x27;</span></span><br><span class="line">				)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;status&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_INTEGER,</span><br><span class="line">					<span class="number">1</span>,</span><br><span class="line">					[],</span><br><span class="line">					<span class="string">&#x27;Post Status&#x27;</span></span><br><span class="line">				)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;featured_image&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_TEXT,</span><br><span class="line">					<span class="number">255</span>,</span><br><span class="line">					[],</span><br><span class="line">					<span class="string">&#x27;Post Featured Image&#x27;</span></span><br><span class="line">				)</span><br><span class="line">				-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;created_at&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_TIMESTAMP,</span><br><span class="line">					<span class="literal">null</span>,</span><br><span class="line">					[<span class="string">&#x27;nullable&#x27;</span> =&gt; <span class="literal">false</span>, <span class="string">&#x27;default&#x27;</span> =&gt; \Magento\Framework\DB\Ddl\Table::TIMESTAMP_INIT],</span><br><span class="line">					<span class="string">&#x27;Created At&#x27;</span></span><br><span class="line">				)-&gt;addColumn(</span><br><span class="line">					<span class="string">&#x27;updated_at&#x27;</span>,</span><br><span class="line">					\Magento\Framework\DB\Ddl\Table::TYPE_TIMESTAMP,</span><br><span class="line">					<span class="literal">null</span>,</span><br><span class="line">					[<span class="string">&#x27;nullable&#x27;</span> =&gt; <span class="literal">false</span>, <span class="string">&#x27;default&#x27;</span> =&gt; \Magento\Framework\DB\Ddl\Table::TIMESTAMP_INIT_UPDATE],</span><br><span class="line">					<span class="string">&#x27;Updated At&#x27;</span>)</span><br><span class="line">				-&gt;setComment(<span class="string">&#x27;Post Table&#x27;</span>);</span><br><span class="line">			<span class="variable">$installer</span>-&gt;getConnection()-&gt;createTable(<span class="variable">$table</span>);</span><br><span class="line"></span><br><span class="line">			<span class="variable">$installer</span>-&gt;getConnection()-&gt;addIndex(</span><br><span class="line">				<span class="variable">$installer</span>-&gt;getTable(<span class="string">&#x27;learning_helloworld_post&#x27;</span>),</span><br><span class="line">				<span class="variable">$setup</span>-&gt;getIdxName(</span><br><span class="line">					<span class="variable">$installer</span>-&gt;getTable(<span class="string">&#x27;learning_helloworld_post&#x27;</span>),</span><br><span class="line">					[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;url_key&#x27;</span>, <span class="string">&#x27;post_content&#x27;</span>, <span class="string">&#x27;tags&#x27;</span>, <span class="string">&#x27;featured_image&#x27;</span>],</span><br><span class="line">					\Magento\Framework\DB\Adapter\AdapterInterface::INDEX_TYPE_FULLTEXT</span><br><span class="line">				),</span><br><span class="line">				[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;url_key&#x27;</span>, <span class="string">&#x27;post_content&#x27;</span>, <span class="string">&#x27;tags&#x27;</span>, <span class="string">&#x27;featured_image&#x27;</span>],</span><br><span class="line">				\Magento\Framework\DB\Adapter\AdapterInterface::INDEX_TYPE_FULLTEXT</span><br><span class="line">			);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="variable">$installer</span>-&gt;endSetup();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Class <strong>InstallSchema</strong> phải được <strong>extends</strong> class <span style="color:green"><strong>\Magento\Framework\Setup\InstallSchemaInterface</strong></span></li>
<li>Class <strong>InstallSchema</strong> phải có phương thức <strong>method()</strong> với 2 tham số là <strong>SchemaSetupInterface</strong> và <strong>ModuleContextInterface</strong></li>
<li><strong>SchemaSetupInterface</strong> sẽ chứa tất cả các hàm để tương tác với database, còn <strong>SchemaSetupInterface</strong> chứa duy nhất 1 method <strong>getVersion()</strong> trả về version hiện tại của module</li>
<li>Trong ví dụ trên chúng ta đã tạo một bảng <code>learning_helloworld_post</code> với các cột <code>post_id</code>, <code>name</code>, <code>url_key</code>, <code>post_content</code>, <code>tags</code>, <code>status</code>,… với các kiểu dữ liệu Integer, Text, hay Timestamp…</li>
</ul>
<h2 id="3-InstallData-Script"><a href="#3-InstallData-Script" class="headerlink" title="3.InstallData Script "></a>3.InstallData Script <a name="install-data"></a></h2><ul>
<li><strong>InstallData</strong> sẽ được chạy sau <strong>InstallSchema</strong> trong quá trình install module, để thêm data vào bảng CSDL.</li>
<li>Ví dụ dưới đây sẽ thêm bản ghi vào bảng <code>learning_helloworld_post</code> mà chúng ta vừa tạo.</li>
</ul>
<p>File <span style="color:green"><strong>app/code/Learning/HelloWorld/Setup/InstallData.php</strong></span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Learning</span>\<span class="title">HelloWorld</span>\<span class="title">Setup</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">InstallDataInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">ModuleContextInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">ModuleDataSetupInterface</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InstallData</span> <span class="keyword">implements</span> <span class="title">InstallDataInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> <span class="variable">$_postFactory</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">\Learning\HelloWorld\Model\PostFactory <span class="variable">$postFactory</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">$this</span>-&gt;_postFactory = <span class="variable">$postFactory</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">install</span>(<span class="params">ModuleDataSetupInterface <span class="variable">$setup</span>, ModuleContextInterface <span class="variable">$context</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="variable">$data</span> = [</span><br><span class="line">			<span class="string">&#x27;name&#x27;</span>         =&gt; <span class="string">&quot;How to Create SQL Setup Script in Magento 2&quot;</span>,</span><br><span class="line">			<span class="string">&#x27;post_content&#x27;</span> =&gt; <span class="string">&quot;In this article, we will find out how to install and upgrade sql script for module in Magento 2. When you install or upgrade a module, you may need to change the database structure or add some new data for current table. To do this, Magento 2 provide you some classes which you can do all of them.&quot;</span>,</span><br><span class="line">			<span class="string">&#x27;url_key&#x27;</span>      =&gt; <span class="string">&#x27;/magento-2-module-development/magento-2-how-to-create-sql-setup-script.html&#x27;</span>,</span><br><span class="line">			<span class="string">&#x27;tags&#x27;</span>         =&gt; <span class="string">&#x27;magento 2,learning helloworld&#x27;</span>,</span><br><span class="line">			<span class="string">&#x27;status&#x27;</span>       =&gt; <span class="number">1</span></span><br><span class="line">		];</span><br><span class="line">		<span class="variable">$post</span> = <span class="keyword">$this</span>-&gt;_postFactory-&gt;create();</span><br><span class="line">		<span class="variable">$post</span>-&gt;addData(<span class="variable">$data</span>)-&gt;save();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Class <strong>InstallSchema</strong> sẽ có cùng concept với <strong>InstallSchema</strong>, chúng ta sẽ thêm bản ghi cho bảng ở trong hàm <strong>install</strong>.</li>
<li>Ở đây chúng ta dùng <strong>ModelFactory</strong> <code>PostFactory</code> để tạo bản ghi cho bảng <code>learning_helloworld_post</code>. (Xem thêm về Model ở bài viết <a href="/2021/08/15/models-in-magento2/" title="Models Trong Magento2">Models Trong Magento2</a>)</li>
</ul>
<h2 id="4-UpgradeSchema-Script"><a href="#4-UpgradeSchema-Script" class="headerlink" title="4. UpgradeSchema Script "></a>4. UpgradeSchema Script <a name="upgrade-schema"></a></h2><ul>
<li><strong>Upgrade Script</strong> (Upgrade Schema và Upgrade Data) sẽ được chạy khi module được upgrade (nó cũng có thể được chạy khi module install nếu như có 2 class này ngay từ đầu).</li>
<li><strong>Upgrade Script</strong> sẽ khác với <strong>Install Script</strong> ở chỗ nó sẽ được chạy mỗi khi Module được upgrade.</li>
<li>Vậy làm thế nào để phân biệt giữa các lần module được upgrade thì sẽ thực hiện hành vi gì tương ứng? Câu trả lời là chúng ta sẽ dựa vào version của module.</li>
<li>Trong file upgrade chúng ta sẽ chỉ định version của module và so sánh với attribute <strong>setup_version</strong> trong file <span style="color:green"><strong>app/code/Learning/HelloWorld/etc/module.xml</strong></span></li>
</ul>
<p>File <span style="color:green"><strong>app/code/Learning/HelloWorld/Setup/UpgradeSchema.php</strong></span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Learning</span>\<span class="title">HelloWorld</span>\<span class="title">Setup</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">UpgradeSchemaInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">SchemaSetupInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">ModuleContextInterface</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UpgradeSchema</span> <span class="keyword">implements</span> <span class="title">UpgradeSchemaInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">upgrade</span>(<span class="params"> SchemaSetupInterface <span class="variable">$setup</span>, ModuleContextInterface <span class="variable">$context</span> </span>) </span>&#123;</span><br><span class="line">		<span class="variable">$installer</span> = <span class="variable">$setup</span>;</span><br><span class="line"></span><br><span class="line">		<span class="variable">$installer</span>-&gt;startSetup();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(version_compare(<span class="variable">$context</span>-&gt;getVersion(), <span class="string">&#x27;1.2.0&#x27;</span>, <span class="string">&#x27;&lt;&#x27;</span>)) &#123;</span><br><span class="line">			<span class="variable">$installer</span>-&gt;getConnection()-&gt;addColumn(</span><br><span class="line">				<span class="variable">$installer</span>-&gt;getTable( <span class="string">&#x27;learning_helloworld_post&#x27;</span> ),</span><br><span class="line">				<span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">				[</span><br><span class="line">					<span class="string">&#x27;type&#x27;</span> =&gt; \Magento\Framework\DB\Ddl\Table::TYPE_DECIMAL,</span><br><span class="line">					<span class="string">&#x27;nullable&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">					<span class="string">&#x27;length&#x27;</span> =&gt; <span class="string">&#x27;12,4&#x27;</span>,</span><br><span class="line">					<span class="string">&#x27;comment&#x27;</span> =&gt; <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">					<span class="string">&#x27;after&#x27;</span> =&gt; <span class="string">&#x27;status&#x27;</span></span><br><span class="line">				]</span><br><span class="line">			);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="variable">$installer</span>-&gt;endSetup();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Class <strong>UpgradeSchema</strong> sẽ có phương thức <strong>upgrade</strong> nhận vào 2 tham số <strong>SchemaSetupInterface</strong> và <strong>ModuleContextInterface</strong> như class <strong>InstallSchema</strong>, method <strong>Upgrade</strong> này sẽ được chạy mỗi khi module được upgrade.</p>
</li>
<li><p>Như đã nói, chúng ta cũng sẽ thực hiện compare version để thêm script cho mỗi version. <code>$context-&gt;getVersion()</code> để lấy ra version hiện tại của module ở trong file module.xml</p>
<p><code>version_compare($context-&gt;getVersion(), &#39;1.2.0&#39;, &#39;&lt;&#39;)</code></p>
<p>có nghĩa là nếu version hiện tại nhỏ hơn “&lt;” <code>1.2.0</code> thì sẽ thực hiện đoạn script này…</p>
</li>
<li><p>Do đó lưu ý là mỗi khi muốn upgrade module chúng ta phải nâng version của module trong file <strong>module.xml</strong></p>
</li>
</ul>
<h2 id="5-UpgradeData-Script"><a href="#5-UpgradeData-Script" class="headerlink" title="5. UpgradeData Script "></a>5. UpgradeData Script <a name="upgrade-data"></a></h2><ul>
<li>Class này tương tự như class <strong>Upgrade Schema</strong>, nó cũng được chạy mỗi khi module được upgrade.</li>
<li><strong>Upgrade Schema</strong> được dùng khi bạn muốn chỉnh sửa record trong bảng CSDL hay thêm record trong bảng.</li>
<li><strong>Install Data</strong> cũng làm điều này, tuy nhiện nó chỉ được chạy trong quá trình install của module. Do đó nếu module được install rồi thì bạn phải dùng <strong>UpgradeSchema</strong> để thực hiện.</li>
</ul>
<p>File <span style="color:green"><strong>app/code/Learning/HelloWorld/Setup/UpgradeData.php</strong></span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Learning</span>\<span class="title">HelloWorld</span>\<span class="title">Setup</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">UpgradeDataInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">ModuleDataSetupInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Magento</span>\<span class="title">Framework</span>\<span class="title">Setup</span>\<span class="title">ModuleContextInterface</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UpgradeData</span> <span class="keyword">implements</span> <span class="title">UpgradeDataInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> <span class="variable">$_postFactory</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">\Learning\HelloWorld\Model\PostFactory <span class="variable">$postFactory</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">$this</span>-&gt;_postFactory = <span class="variable">$postFactory</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">upgrade</span>(<span class="params">ModuleDataSetupInterface <span class="variable">$setup</span>, ModuleContextInterface <span class="variable">$context</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (version_compare(<span class="variable">$context</span>-&gt;getVersion(), <span class="string">&#x27;1.2.0&#x27;</span>, <span class="string">&#x27;&lt;&#x27;</span>)) &#123;</span><br><span class="line">			<span class="variable">$data</span> = [</span><br><span class="line">				<span class="string">&#x27;name&#x27;</span>         =&gt; <span class="string">&quot;Magento 2 Events&quot;</span>,</span><br><span class="line">				<span class="string">&#x27;post_content&#x27;</span> =&gt; <span class="string">&quot;This article will talk about Events List in Magento 2. As you know, Magento 2 is using the events driven architecture which will help too much to extend the Magento functionality. We can understand this event as a kind of flag that rises when a specific situation happens. We will use an example module Learning_HelloWorld to exercise this lesson.&quot;</span>,</span><br><span class="line">				<span class="string">&#x27;url_key&#x27;</span>      =&gt; <span class="string">&#x27;/magento-2-module-development/magento-2-events.html&#x27;</span>,</span><br><span class="line">				<span class="string">&#x27;tags&#x27;</span>         =&gt; <span class="string">&#x27;magento 2,learning helloworld&#x27;</span>,</span><br><span class="line">				<span class="string">&#x27;status&#x27;</span>       =&gt; <span class="number">1</span></span><br><span class="line">			];</span><br><span class="line">			<span class="variable">$post</span> = <span class="keyword">$this</span>-&gt;_postFactory-&gt;create();</span><br><span class="line">			<span class="variable">$post</span>-&gt;addData(<span class="variable">$data</span>)-&gt;save();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-Tong-Ket"><a href="#6-Tong-Ket" class="headerlink" title="6. Tổng Kết "></a>6. Tổng Kết <a name="summary"></a></h2><ul>
<li><p>Bài viết này đến đây là hết rồi. Qua bài viết mình đã trình bày cách để chúng ta có thể tạo bảng, thêm dữ liệu cho bảng cũng như sửa bảng và sửa dữ liệu của bảng. Mong bài viết đơn giản này sẽ giúp các bạn hiểu hơn về ý nghĩa của các <strong>Install/Upgrade Script</strong>. Bài viết tiếp theo mình sẽ chia sẻ về một cách tạo bảng khác với <strong>Declarative Schema</strong>. So stay stune, hihi.</p>
</li>
<li><p>Bài viết tham khảo <a target="_blank" rel="noopener" href="https://www.mageplaza.com/magento-2-module-development/magento-2-how-to-create-sql-setup-script.html">https://www.mageplaza.com/magento-2-module-development/magento-2-how-to-create-sql-setup-script.html</a></p>
</li>
<li><p>À hôm nay là 2-9 <strong>National Day</strong>, năm nay được nghỉ tận 4 ngày lận (dance). Hôm nay được nghỉ nhưng mình vẫn muốn productivity một chút. Cuối cùng thì đã viết xong bài viết này rồi (happy-face). It’s time to enjoy the holiday, tada. Giờ mình sẽ đi xem một bộ film cách mạng cho hợp với không khí của ngày Quốc Khánh, hihi. Mà đêm nay còn có trận bóng đá Vòng Loại 3 World Cup 2022 Vietnam-Saudi Arabia nữa. Hooray <strong>VIỆT NAM VÔ ĐỊCH</strong></p>
<p><img src="/2021/09/02/setup-upgrade-script-magento2/vietnam.gif" alt="Viet Nam vô địch"></p>
</li>
</ul>
 
    </div>
    <div class="article-footer">
      <!-- <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/" title="Tạo Và Chỉnh Sửa Bảng với Setup/Upgrade Script Trong Magento2" target="_blank" rel="external">https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote> -->


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/huongvnq" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/coco.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/huongvnq" target="_blank"><span class="text-dark">Meditation Coding</span><small class="ml-1x">Web Developer</small></a></h3>
        <div>Life is Simple</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
   
  <section id="comments">
  	
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    
  </section>

 
</div>
 <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/09/25/declarative-schema-magento2/" title="Declarative Schema Trong Magento2 (Phần 1)"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/08/25/jwt-nodejs/" title="JWT Authentication &amp; Authorization in NodeJs REST API"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    <!-- 
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
     -->
  </div>
  </div>
</nav> 
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>Maybe you could buy me a cup of coffee.</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/momo.jpg" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Open momo app scan this qrcode, buy me a coffee!</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/cash-card.jpg" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Scan this qrcode, buy me a coffee!</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"> Momo</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"> Cash Card</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

 

</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/huongvnq" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.facebook.com/profile.php?id=100010291426950" target="_blank" title="Facebook" data-toggle=tooltip data-placement=top><i class="icon icon-facebook"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
    <script defer>
    var disqus_config = function () {
        
            this.page.url = 'https://huongvnq.github.io/2021/09/02/setup-upgrade-script-magento2/';
        
        this.page.identifier = 'setup-upgrade-script-magento2';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'meditationcoding' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>








</body>
</html>